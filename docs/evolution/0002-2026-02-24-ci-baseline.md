# 0002-2026-02-24-ci-baseline

## Metadata

- Date: 2026-02-24
- Sequence: 0002
- Authors: taoyi
- Status: accepted
- Scope: ci, governance

## Summary

A baseline CI workflow was added to enforce a stable quality gate for formatting, compilation, linting, and tests.

## Context and Problem

Without a consistent required check, protected branch policy cannot reliably enforce quality. Different contributors may run different subsets of validation.

## Goals and Non-Goals

Goals:
- Define a single required CI check name.
- Ensure every change can be validated with one deterministic pipeline.

Non-Goals:
- Introduce advanced caching optimization.
- Add platform matrix for CI verification.

## Decision

`CI` workflow was introduced with one job named exactly:
`Verify (fmt, check, clippy, test)`

Steps:
- `cargo fmt --all -- --check`
- `cargo check --workspace`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace`

## Alternatives Considered

1. Multiple independent CI jobs as required checks
- Pros: more granular feedback
- Cons: branch protection setup complexity
- Decision: deferred

2. Only run `cargo test` and skip lint/format checks
- Pros: faster
- Cons: lower code quality consistency
- Decision: rejected

## Implementation Details

- Added: `.github/workflows/ci.yml`
- Required check contract established via stable job name.

## Impact

Technical impact:
- CI quality gate became explicit and enforceable.

Product/user impact:
- No direct runtime behavior change.

Operational impact:
- PR merge policy can depend on a single canonical check.

## Verification

- Workflow present and executable in repository.
- Subsequent PRs used this check as merge gate.

## Risks and Follow-ups

- Risk: runtime length may grow with workspace size.
- Follow-up: split fast/slow checks if CI latency becomes problematic.

## Traceability

- Commits: `feae41b52e5dbaa70f232d59d83e30eb48134357`
- PRs: N/A
- Tags: N/A
- Releases: N/A
- Workflow runs: CI runs tied to `main` and PR events
- Related docs: `docs/release-strategy.md`

